<div class="bill-form-container">
  <h2>Create New Bill</h2>
  <form (ngSubmit)="submitForm()">
    <div class="form-group">
      <label for="patientID">Patient ID:</label>
      <input
        type="text"
        id="patientID"
        name="patientID"
        [(ngModel)]="newBill.PatientID"
        required
        readonly
      />
    </div>
    <div class="form-group">
      <label for="totalAmount">Total Amount:</label>
      <input
        type="number"
        id="totalAmount"
        name="totalAmount"
        [(ngModel)]="newBill.TotalAmount"
        required
      />
    </div>
    <div class="form-group">
      <label for="paymentStatus">Payment Status:</label>
      <select
        id="paymentStatus"
        name="paymentStatus"
        [(ngModel)]="newBill.PaymentStatus"
        required
      >
        <option value="Paid">Paid</option>
        <option value="Pending">Pending</option>
      </select>
    </div>
    <div class="form-group">
      <label for="billDate">Bill Date:</label>
      <input
        type="date"
        id="billDate"
        name="billDate"
        [(ngModel)]="newBill.BillDate"
        required
      />
    </div>
    <button type="submit">Create Bill</button>
  </form>
</div>

<div class="container">
  <h1>Bill Details</h1>
  <div class="bill-details" *ngFor="let bill of bills">
    <div class="field">
      <span class="label">Bill ID:</span>
      <span class="value">{{ bill.BillID }}</span>
    </div>
    <div class="field">
      <span class="label">Patient ID:</span>
      <span class="value">{{ bill.PatientID }}</span>
    </div>
    <div class="field">
      <span class="label">Total Amount:</span>
      <span class="value">{{ bill.TotalAmount }}</span>
    </div>
    <div class="field">
      <span class="label">Payment Status:</span>
      <span class="value">{{ bill.PaymentStatus }}</span>
    </div>
    <div class="field">
      <span class="label">Bill Date:</span>
      <span class="value">{{ bill.BillDate | date }}</span>
    </div>
    <div class="field">
      <span class="label">Patient Name:</span>
      <span class="value">{{ bill.PatientName }}</span>
    </div>
    <hr />
    <!-- Button to pay if payment status is pending -->
    <button
      *ngIf="bill.PaymentStatus === 'Pending'"
      (click)="showPaymentForm(bill)"
    >
      Pay
    </button>

    <form *ngIf="bill.showForm" (ngSubmit)="submitBill()" #paymentForm="ngForm">

      <label for="billID">Bill ID:</label><br />
      <input
        type="text"
        id="billID"
        name="billID"
        [(ngModel)]="data.BillID"
      /><br /><br />

      <label for="paymentCode">Payment Code:</label><br />
      <input
        type="text"
        id="paymentCode"
        name="paymentCode"
        [(ngModel)]="data.PaymentCode"
      /><br /><br />

      <label for="paymentMethod">Payment Method:</label><br />
      <input
        type="text"
        id="paymentMethod"
        name="paymentMethod"
        [(ngModel)]="data.PaymentMethod"
      /><br /><br />

      <label for="paymentAmount">Payment Amount:</label><br />
      <input
        type="text"
        id="paymentAmount"
        name="paymentAmount"
        [(ngModel)]="data.PaymentAmount"
      /><br /><br />

      <button type="submit">Submit</button>
    </form>
  </div>
</div>
